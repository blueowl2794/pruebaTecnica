{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\usuario\\\\Desktop\\\\pruebaTecnica\\\\client\\\\src\\\\contexts\\\\authContext.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport { createContext, useCallback, useContext, useMemo, useState } from \"react\";\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst NAME = 'name';\nconst EMAIL = 'email';\nconst CREATE = 'createdAt';\nconst ID = 'id';\nconst TODO = 'todo';\nexport const AuthContext = /*#__PURE__*/createContext();\nexport function AuthContextProvider(_ref) {\n  _s();\n\n  var _window$localStorage$;\n\n  let {\n    children\n  } = _ref;\n  const [isAuthenticated, setIsAuthenticated] = useState((_window$localStorage$ = window.localStorage.getItem(NAME)) !== null && _window$localStorage$ !== void 0 ? _window$localStorage$ : false);\n  const login = useCallback(async function (data) {\n    await axios.post(\"http://localhost:3000/signin\", data, {\n      withCredentials: true\n    }) //{ withCredentials: true }\n    .then(c => {\n      axios.defaults.headers.common['Authorization'] = `Bearer ${c.data['token']}`;\n      console.log(\"c\", c.data.user);\n      window.localStorage.setItem(NAME, c.data.user.name);\n      window.localStorage.setItem(EMAIL, c.data.user.email);\n      window.localStorage.setItem(CREATE, c.data.user.createdAt);\n      window.localStorage.setItem(ID, c.data.user.id);\n      window.localStorage.setItem(TODO, c.data.user);\n    });\n    setIsAuthenticated(true);\n  }, []);\n  const logout = useCallback(function () {\n    window.localStorage.removeItem(NAME);\n    window.localStorage.removeItem(EMAIL);\n    window.localStorage.removeItem(CREATE);\n    window.localStorage.removeItem(ID);\n    setIsAuthenticated(false);\n  }, []);\n  const value = useMemo(() => ({\n    login,\n    logout,\n    isAuthenticated\n  }), [login, logout, isAuthenticated]);\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: value,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 47,\n    columnNumber: 12\n  }, this);\n}\n\n_s(AuthContextProvider, \"RQoRNgbNW3iH58bOf6CqEX6xGvw=\");\n\n_c = AuthContextProvider;\n; // AuthContextProvider.propTypes = {\n//     children: PropTypes.object\n// };\n\nexport function useAuthContext() {\n  _s2();\n\n  return useContext(AuthContext);\n}\n\n_s2(useAuthContext, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\n\nvar _c;\n\n$RefreshReg$(_c, \"AuthContextProvider\");","map":{"version":3,"names":["createContext","useCallback","useContext","useMemo","useState","axios","NAME","EMAIL","CREATE","ID","TODO","AuthContext","AuthContextProvider","children","isAuthenticated","setIsAuthenticated","window","localStorage","getItem","login","data","post","withCredentials","then","c","defaults","headers","common","console","log","user","setItem","name","email","createdAt","id","logout","removeItem","value","useAuthContext"],"sources":["C:/Users/usuario/Desktop/pruebaTecnica/client/src/contexts/authContext.js"],"sourcesContent":["import {createContext, useCallback, useContext, useMemo, useState} from \"react\";\r\nimport axios from 'axios';\r\n\r\n\r\nconst NAME ='name'\r\nconst EMAIL ='email'\r\nconst CREATE ='createdAt'\r\nconst ID ='id'\r\nconst TODO ='todo'\r\n\r\nexport const AuthContext = createContext();\r\n\r\nexport function AuthContextProvider({children}){\r\n    const [isAuthenticated, setIsAuthenticated] = useState(window.localStorage.getItem(NAME)??false);\r\n\r\n    const login = useCallback(async function(data){\r\n        await axios.post(\"http://localhost:3000/signin\" , data , {withCredentials: true}  )//{ withCredentials: true }\r\n        .then((c)=>{\r\n            axios.defaults.headers.common['Authorization']=`Bearer ${c.data['token']}`;\r\n            console.log(\"c\", c.data.user);\r\n            window.localStorage.setItem(NAME,c.data.user.name);\r\n            window.localStorage.setItem(EMAIL,c.data.user.email);\r\n            window.localStorage.setItem(CREATE,c.data.user.createdAt);\r\n            window.localStorage.setItem(ID,c.data.user.id);\r\n            window.localStorage.setItem(TODO,c.data.user);\r\n            \r\n        })\r\n        setIsAuthenticated(true);\r\n    },[])\r\n\r\n    const logout = useCallback(function(){\r\n        window.localStorage.removeItem(NAME);\r\n        window.localStorage.removeItem(EMAIL);\r\n        window.localStorage.removeItem(CREATE);\r\n        window.localStorage.removeItem(ID);\r\n        setIsAuthenticated(false);\r\n    },[])\r\n\r\n    const value = useMemo(\r\n        ()=> ({\r\n            login,\r\n            logout,\r\n            isAuthenticated\r\n        }) ,[login,logout,isAuthenticated]\r\n    );\r\n\r\n    return <AuthContext.Provider value={value}>{children}</AuthContext.Provider>;\r\n};\r\n\r\n// AuthContextProvider.propTypes = {\r\n//     children: PropTypes.object\r\n// };\r\n\r\nexport function useAuthContext() {\r\n    return useContext(AuthContext);\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}