{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\usuario\\\\Desktop\\\\pruebaTecnica\\\\client\\\\src\\\\contexts\\\\authContext.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport { createContext, useCallback, useContext, useMemo, useState } from \"react\";\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst MY_AUTH_APP = 'MY_AUTH_APP_1';\nexport const AuthContext = /*#__PURE__*/createContext();\nexport function AuthContextProvider(_ref) {\n  _s();\n\n  var _window$localStorage$;\n\n  let {\n    children\n  } = _ref;\n  const [isAuthenticated, setIsAuthenticated] = useState((_window$localStorage$ = window.localStorage.getItem(MY_AUTH_APP)) !== null && _window$localStorage$ !== void 0 ? _window$localStorage$ : false);\n  const login = useCallback(async function (data) {\n    await axios.post(\"http://localhost:3000/signin\", data, {\n      withCredentials: true\n    }) //{ withCredentials: true }\n    .then(c => {\n      axios.defaults.headers.common['Authorization'] = `Bearer ${c.data['token']}`;\n      console.log(\"c\", c.data['token']);\n    });\n    window.localStorage.setItem(MY_AUTH_APP, true);\n    setIsAuthenticated(true);\n  }, []);\n  const logout = useCallback(function () {\n    window.localStorage.removeItem(MY_AUTH_APP);\n    setIsAuthenticated(false);\n  }, []);\n  const value = useMemo(() => ({\n    login,\n    logout,\n    isAuthenticated\n  }), [login, logout, isAuthenticated]);\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: value,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 36,\n    columnNumber: 12\n  }, this);\n}\n\n_s(AuthContextProvider, \"U3t8u6Tuzmb9FDAaMaRqLSgS/4M=\");\n\n_c = AuthContextProvider;\n; // AuthContextProvider.propTypes = {\n//     children: PropTypes.object\n// };\n\nexport function useAuthContext() {\n  _s2();\n\n  return useContext(AuthContext);\n}\n\n_s2(useAuthContext, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\n\nvar _c;\n\n$RefreshReg$(_c, \"AuthContextProvider\");","map":{"version":3,"names":["createContext","useCallback","useContext","useMemo","useState","axios","MY_AUTH_APP","AuthContext","AuthContextProvider","children","isAuthenticated","setIsAuthenticated","window","localStorage","getItem","login","data","post","withCredentials","then","c","defaults","headers","common","console","log","setItem","logout","removeItem","value","useAuthContext"],"sources":["C:/Users/usuario/Desktop/pruebaTecnica/client/src/contexts/authContext.js"],"sourcesContent":["import {createContext, useCallback, useContext, useMemo, useState} from \"react\";\r\nimport axios from 'axios';\r\n\r\n\r\nconst MY_AUTH_APP ='MY_AUTH_APP_1'\r\n\r\nexport const AuthContext = createContext();\r\n\r\nexport function AuthContextProvider({children}){\r\n    const [isAuthenticated, setIsAuthenticated] = useState(window.localStorage.getItem(MY_AUTH_APP)??false);\r\n\r\n    const login = useCallback(async function(data){\r\n        await axios.post(\"http://localhost:3000/signin\" , data , {withCredentials: true}  )//{ withCredentials: true }\r\n        .then((c)=>{\r\n            axios.defaults.headers.common['Authorization']=`Bearer ${c.data['token']}`;\r\n            console.log(\"c\", c.data['token']);\r\n            \r\n        })\r\n        window.localStorage.setItem(MY_AUTH_APP,true);\r\n        setIsAuthenticated(true);\r\n    },[])\r\n\r\n    const logout = useCallback(function(){\r\n        window.localStorage.removeItem(MY_AUTH_APP);\r\n        setIsAuthenticated(false);\r\n    },[])\r\n\r\n    const value = useMemo(\r\n        ()=> ({\r\n            login,\r\n            logout,\r\n            isAuthenticated\r\n        }) ,[login,logout,isAuthenticated]\r\n    );\r\n\r\n    return <AuthContext.Provider value={value}>{children}</AuthContext.Provider>;\r\n};\r\n\r\n// AuthContextProvider.propTypes = {\r\n//     children: PropTypes.object\r\n// };\r\n\r\nexport function useAuthContext() {\r\n    return useContext(AuthContext);\r\n}"],"mappings":";;;;AAAA,SAAQA,aAAR,EAAuBC,WAAvB,EAAoCC,UAApC,EAAgDC,OAAhD,EAAyDC,QAAzD,QAAwE,OAAxE;AACA,OAAOC,KAAP,MAAkB,OAAlB;;AAGA,MAAMC,WAAW,GAAE,eAAnB;AAEA,OAAO,MAAMC,WAAW,gBAAGP,aAAa,EAAjC;AAEP,OAAO,SAASQ,mBAAT,OAAwC;EAAA;;EAAA;;EAAA,IAAX;IAACC;EAAD,CAAW;EAC3C,MAAM,CAACC,eAAD,EAAkBC,kBAAlB,IAAwCP,QAAQ,0BAACQ,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4BR,WAA5B,CAAD,yEAA2C,KAA3C,CAAtD;EAEA,MAAMS,KAAK,GAAGd,WAAW,CAAC,gBAAee,IAAf,EAAoB;IAC1C,MAAMX,KAAK,CAACY,IAAN,CAAW,8BAAX,EAA4CD,IAA5C,EAAmD;MAACE,eAAe,EAAE;IAAlB,CAAnD,EAA6E;IAA7E,CACLC,IADK,CACCC,CAAD,IAAK;MACPf,KAAK,CAACgB,QAAN,CAAeC,OAAf,CAAuBC,MAAvB,CAA8B,eAA9B,IAAgD,UAASH,CAAC,CAACJ,IAAF,CAAO,OAAP,CAAgB,EAAzE;MACAQ,OAAO,CAACC,GAAR,CAAY,GAAZ,EAAiBL,CAAC,CAACJ,IAAF,CAAO,OAAP,CAAjB;IAEH,CALK,CAAN;IAMAJ,MAAM,CAACC,YAAP,CAAoBa,OAApB,CAA4BpB,WAA5B,EAAwC,IAAxC;IACAK,kBAAkB,CAAC,IAAD,CAAlB;EACH,CATwB,EASvB,EATuB,CAAzB;EAWA,MAAMgB,MAAM,GAAG1B,WAAW,CAAC,YAAU;IACjCW,MAAM,CAACC,YAAP,CAAoBe,UAApB,CAA+BtB,WAA/B;IACAK,kBAAkB,CAAC,KAAD,CAAlB;EACH,CAHyB,EAGxB,EAHwB,CAA1B;EAKA,MAAMkB,KAAK,GAAG1B,OAAO,CACjB,OAAM;IACFY,KADE;IAEFY,MAFE;IAGFjB;EAHE,CAAN,CADiB,EAKb,CAACK,KAAD,EAAOY,MAAP,EAAcjB,eAAd,CALa,CAArB;EAQA,oBAAO,QAAC,WAAD,CAAa,QAAb;IAAsB,KAAK,EAAEmB,KAA7B;IAAA,UAAqCpB;EAArC;IAAA;IAAA;IAAA;EAAA,QAAP;AACH;;GA5BeD,mB;;KAAAA,mB;AA4Bf,C,CAED;AACA;AACA;;AAEA,OAAO,SAASsB,cAAT,GAA0B;EAAA;;EAC7B,OAAO5B,UAAU,CAACK,WAAD,CAAjB;AACH;;IAFeuB,c"},"metadata":{},"sourceType":"module"}